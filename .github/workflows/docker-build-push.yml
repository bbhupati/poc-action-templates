  on:
    workflow_call:

  # # docker-build-push.yml
  # jobs:
  #   docker-build-push:
  #     runs-on: ubuntu-latest
  #     steps:
  #       - name: Checkout code
  #         uses: actions/checkout@v2
          
  #       - name: Read environment file and set environment variables
  #         run: |
  #           echo "env is $ENVIRONMENT_TYPE"
  #           ENV_FILE=".github/workflows/${ENVIRONMENT_TYPE}-vars.env"
  #           cat $ENV_FILE >> $GITHUB_ENV
  #           echo "Loaded $ENV_FILE into environment variables"
  #       - name: Display loaded environment variables
  #         run: |
  #           echo "API_URL=$API_URL"
  #           echo "DATABASE_URL=$DATABASE_URL"

  
  jobs:
    job1:
      uses: bbhupati/poc-action-templates/.github/workflows/set-env.yml@master
  
    job2:
      runs-on: ubuntu-latest
      needs: job1
      steps:
        - run: echo ${{ needs.job1.outputs.environment }}
  
  # docker-build-push:
  #   runs-on: ubuntu-latest
  #   needs: [set-environment]
  #   steps:
  #     - name: Checkout code
  #       uses: actions/checkout@v2
    
  #     - name: Docker Build and Push
  #       run: |
  #         IMAGE_NAME=${{ vars.IMAGE_NAME }}
  #         ACR_REPO=${{ vars.ACR_REGISTRY }}
  #         DOCKER_TAG=${{ github.ref_name }}-${{ github.run_id }}

  #         # Docker Log in to Azure Container Registry (ACR)
  #         docker login -u ${{ secrets.ACR_USERNAME }} -p ${{ secrets.ACR_PASSWORD }} $ACR_REPO

  #         # Build the Docker image
  #         docker build -t $IMAGE_NAME .

  #         # Tag the Docker image with ACR repository and tag
  #         docker tag $IMAGE_NAME:latest $ACR_REPO/$IMAGE_NAME:$DOCKER_TAG

  #         # Push Docker Image to ACR
  #         docker push $ACR_REPO/$IMAGE_NAME:$DOCKER_TAG